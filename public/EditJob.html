<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./styles.css" />

</head>
<body>
  
    <h5 class="Dashboard btn">Dashboard</h5>
    <div class="form Edit-form">
        <h5>Update Job</h5>
        <div class="form-row">
        <label for="Company" class="form-label">Company</label>
        <input type="text" class="form-input Company-input" name="company" id="company" />
        </div>
        <!-- position -->
        <div class="form-row">
        <label for="Position" class="form-label">Position</label>
        <input type="text" class="form-input Position-input" name="position"  id="position"/>
        </div>

        <!-- Status -->
        <label for="status" class="form-label">Status</label>
        <select class="form-input dropDown" id="status" name="status">
            <option value="interview">interview</option>
            <option value="declined">declined</option>
            <option value="pending">pending</option>
           
        </select>
        <div class="text-small form-alert">there was an error</div>
        <div class="success"></div>
        <button type="submit" class="btn btn-block Update">Update Now</button>
    </div>
        
    <script
    src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"
    integrity="sha512-bZS47S7sPOxkjU/4Bt0zrhEtWx0y0CRkhEp8IckzK+ltifIIE9EMIMTuT/mEzoIMewUINruDBIR/jJnbguonqQ=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  ></script>
    <script>
        
        let form = document.querySelector('.form')
        let Update = document.querySelector('.Update')

        const companyy = document.getElementById('company')
        const positionn = document.getElementById('position')
        const statuss = document.getElementById('status')

      const getItem =JSON.parse(window.localStorage.getItem('EditTask'));
        // console.log(getItem.dataEdit)
        let {company,position,status,_id} = getItem.dataEdit;
      
        companyy.value = company
        positionn.value = position
        statuss.value = status
        let id =_id
        

        Update.addEventListener('click', async(e)=>{
            e.preventDefault()
            console.log(company,position,status);
            console.log(id)
            const post =  await axios.patch(`/api/v1/job/${id}`,{
                company:  companyy.value,
                position: positionn.value,
                status: statuss.value
            })
            console.log((post));
            location.replace('/AllJobs.html')
        })
      
    </script>
    
</body>
</html>